<!DOCTYPE HTML><html xmlns="http://www.w3.org/1999/xhtml"><head><meta charset="utf-8"><title>Terminus</title><meta name="description" content="The last and the first destination"><meta name="viewport" content="width=device-width,initial-scale=1,maximum-scale=1,user-scalable=0"><meta http-equiv="X-UA-Compatible" content="IE=9; IE=8; IE=7; IE=edge"><meta name="author" content="luffah"><meta name="author" content="Shawn Conrad, Michele Pratusevich, michele.pratusevich@gmail.com"><!-- inject:css --><style>body{color:#efefef;background:#000;font-family:sans-serif;font-size:1.4rem;font-stretch:condensed}.msg,button{font-size:inherit;font-family:inherit}#term{margin:auto;width:98vw;max-width:1024px;background:#000;padding:1rem;-webkit-box-sizing:border-box;box-sizing:border-box}#term .input:before{content:"> ";position:absolute;left:0;top:0}#term .input{line-height:2;position:relative;padding-left:2ch}#term input{display:inline-block;background:none;border:none;max-width:100%;font-size:inherit;font-familly:inherit;color:inherit;outline:none}.img-container,.suggest{display:-webkit-box;display:-ms-flexbox;display:flex}.suggest{height:2rem}.suggest button{padding:0 1ch;border:none;color:gray;background:none;margin:0}.key,.suggest button:focus,.suggest button:hover{color:#f4f4f4}.key{float:left;background:none;border:none}a{color:gray;text-align:center;display:block;position:relative;bottom:-1rem;padding:1rem;-webkit-transition:all .6s;transition:all .6s}a:hover{bottom:1rem}</style><!-- endinject --></head><body><!--    <div id="termwin"></div>--><div id="term"></div><!--    <div id="pics"><img id="scene"></img></div>--><!-- inject:js --><script>var dialog={"gamestart_text":"Welcome! If you are new to the game, here are some tips: \n\nLook at your surroundings with the command \"ls\". \nMove to a new location with the command \"cd LOCATION\" \nYou can backtrack with the command \"cd ..\". \nInteract with things in the world with the command \"less ITEM\" \n\nIf you forget where you are, type \"pwd\" \n\nGo ahead, explore. We hope you enjoy what you find. Do ls as your first command.","cannot_cast":"You cannot cast this spell here.","cmd_cd":"You have moved to %s. %s","cmd_cd_failed":"There is no room called %s.","cmd_cd_flood":"You can't move to multiple locations.","cmd_cd_home":"You have come Home !","cmd_cd_no_parent":"You are at the first room %s.","cmd_cd_parent":"You have moved to %s. %s","cmd_cp_copied":"Just copied %s into %s.","cmd_cp_unknown":"No item of that name to copy.","cmd_help_suggestion":"Type 'man' to ask the man for help","cmd_less_invalid":"Pick a different item to less.","cmd_less_missing":"There is no %s here.","cmd_man_no_query":"Must ask the man about something to receive a response.","cmd_man_not_found":"there is no man page for that command","cmd_mv_done":"Moved %s to %s.","cmd_mv_flood":"You need to move thing A to place B. Use mov [thingA] [placeB].","cmd_mv_invalid":"Must be a valid item and location to move it.","cmd_pwd":"You are in %s.","cmd_rm_done":"You just removed %s \n","cmd_rm_failed":"That item cannot be removed","cmd_rm_invalid":"That's not a valid object to remove.","cmd_rm_miss":"You must remove a particular item.","cmd_touch_created":"You have just created %s","cmd_touch_none":"You haven't touched anything. Check your syntax.","cmd_touch_nothing":"You must touch something in particular.","cmd_unknown":"You haven't learned this spell yet.","combo":"The combination is 'terminus' (without the quotes).","directions":"Locations:\n%s ","incorrect_syntax":"Incorrect syntax. Ask the OldMan for help.","invalid_locker":"No valid locker of that name.","invalid_spell":"This is not a valid spell.","items":"Objects:\n%s","peoples":"Peoples:\n%s","lock_added":"You just added the %s locker","room_empty":"The room is empty.","room_new_created":"New room %s created","room_none":"GenericRoom","room_none_text":"This is a generic room.","item_none":"GenericItem","item_none_text":"This is a generic item.","item_intro":"This is a %s.","people_none":"SomePeople","people_none_text":"This person seems to be a bot.","room_wrong_password":"Wrong password.","room_wrong_syntax":"Wrong syntax. Read the instructions again.","cmd_exit":"Au revoir !","cmd_exit_html":"<p>Terminus a été arreté.</p><p>Au revoir !</p>","room_home":"Dossier Personnel","room_home_text":"Tu es confortablement installé dans ton dossier personnel; \nc'est là où tu ranges toutes tes affaires. \nDisons que c'est ici ta maison.","room_western_forest":"BoisDesLutins","room_western_forest_text":"Tu es entré dans la foret des Lutins . \nLe chemin semble mener à une école. Un panneau indique \n\"Académie des Bots : Grande école de Sorcellerie du Grand Ordinateur. \"","room_spell_casting_academy":"AcadémieDesBots","room_spell_casting_academy_text":"L'entrée, les salles, même les toilettes sont sont bondées.\nLes Bots s'agitent de droite à gauche et de gauche à droite et même vers le centre. \nL'académie a un plafond très haut ce que rend l'entrée très impressionante.\nOuuuuaahhh ! tu faites semblant d'être émerveillé-e \npour ne pas jeter de soupsons sur vous.","item_western_forest_academy_direction":"Panneau","item_western_forest_academy_direction_text":"Académie des Bots : Grande école de Sorcellerie du Grand Ordinateur.\nÀ ne pas manquez aujourd'hui : Leçon d'initiation aux sortilèges !","item_western_forest_back_direction":"RentreChezToi","item_western_forest_back_direction_text":"À tous moment, si tu veux revenir dans le dossier personnel, \nécris juste la commande 'cd ~' ou 'cd'  et tu seras de retour chez toi.\nC'est plus simple que demander son chemin.","item_welcome_letter":"LettreDeBienvenue","item_welcome_letter_text":"Welcome! If you are new to the game, here are some tips: \n\nLook at your surroundings with the command \"ls\". \nMove to a new location with the command \"cd LOCATION\" \nYou can backtrack with the command \"cd ..\". \nInteract with things in the world with the command \"less ITEM\" \n\nIf you forget where you are, type \"pwd\" \n\nGo ahead, explore. We hope you enjoy what you find. Do ls as your first command.","item_practice_dummy":"PracticeDummy%d","item_practice_dummy_text":"It's a practice_dummy","room_academy_practice":"SalleDEntrainement","room_academy_practice_text":"La pièce est remplie de noobs comme vous et d'élèves pratiquant leur nouveaux sortilèges.","item_academy_practice":"LeçonDInitiation","item_academy_practice_text":"Welcome to the Practice Room. Here you will find practice dummies \ntry your new spells on. Go ahead, give it a go! ","room_box":"Box","room_box_text":"This box is too small for you to fit into.","room_box_cd":"You are too small to fit into the box.","room_meadow":"Prairie","room_meadow_text":"C'est une grande et belle prairie verte. Un majesteux poney s'y trouve. Il a l'air triste et solitaire.","people_poney":"Poney","people_poney_text":"Sans t'approcher.Toi et le poney avez appris à communiquer en vous regardant dans les yeux et avec quelques hochements de tête.Finalement, le poney regardait vers l'est comme s'il te suggérait d'aller dans cette direction.","people_academy_student":"BotPressé-e","people_academy_student_text":"Tu tente de parler à un-e des élèves de l'académie. L'étudiant-e ne te vois pas et te rentre dedans. L'élève  se relève vite et te demande pardon et si tout va bien.« Pardon, Pardn, j'été pressé-e et je ne t'ai pas vu. Dis moi. Je ne t'ai jamais vu ? C'est ton premier jour ici ? » (Sourire) « Ne t'inquietes pas, il y a beaucoups de Noobs aujourd'hui. Pourquoi to n'essairai pas de commencer par le cours d'introduction ? Je pourrai t'accompagner mais je suis un peu pressé-e.Traverse le couloirs des cours et trouvera bien quelqu'un pour te guider.» L'élève disparait en courant aussi vite qu'elle ou il s'était relevé.  Vous avez remarqué que sa voix rendrait super bien dans votre groupe de Raggae.Malheureusement, tu n'as pas eu le temps de lui demandé son nom, ni même son adresse mail.","room_mountain":"EasternMountains","room_mountain_text":"You travel through a mountain path, which eventually leads you to the entrance of a cave.\nSitting right outside this cave is an old man.","people_man_sage":"OldMan","people_man_sage_text":"You speak with the old man. He greets you warmly as if you were old friends. You feel at ease with him. \n\"Hello adventurer! \nTop of the morning to you! You seem like a young and energetic explorer.\nIf you're brave enough, your destiny awaits within this cave. That \ndestiny will manifest itself as a portal.\nEnter this portal and begin the next chapter of your life.\"\nThe old man sees the shock on your face and smiles a comforting smile, \n\"I am but a fragile old man, and cannot accompany you through this cave,\nbut what I can provide are a few simple spells that will help you \nalong your way. Just read my old manuscripts and tryout those spells.\"","item_man":"OldManuscripts","item_man_text":"If you ever forget a spell just use \"help\"\nand a list of available spells will appear. If you need details on how \nto use a specific spell, use 'man' followed by spell command. For example, \nif you were interested in details on how to use the \"mv\" spell you would use : man mv","room_lessons":"Lessons","room_lessons_text":"You enter the Lessons hall ready and eager. \nIt's much quieter here, as many of the lessons have already started. \nYou quickly ushered into the Introductory Lesson, which already begun. \nYou enter the class on the \"Move Spell.\"","people_professor":"Professor","people_professor_text":"The professor is difficult to understand,\nbut you pick up just enough to learn 3 things: \n1. You can use 'mv' to move things in the world \n2. You have to indicate the object and the new location (i.e.: mv OBJECT NEWLOCATION) \n3. This spell will only work on certain objects, for example the PracticeDummy objects in the PracticeRoom \n\nYou did not pay enough attention to learn which types of objects are unmovable. \nOh well, experimenting was always more of your style anyways. But be careful!","room_cave":"Cave","room_cave_text":"It's your typical cave: dark and dank.","room_dark_corridor":"DarkCorridor","room_dark_corridor_text":"You travel through the dark corridor and find a small dank room at the end.","room_staircase":"Staircase","room_staircase_text":"The rocky staircase leads you to a dead end and a sign indicating such.","item_dead_end":"Sign","item_dead_end_text":"DEAD END","room_dank":"DankRoom","room_dank_text":"It's a musty dank room. A round boulder sits to the right side of the room.","item_boulder":"Boulder","item_boulder_text":"You feel a slight breeze coming from behind the boulder. Maybe move it out of your way?","room_small_hole":"SmallHole","room_small_hole_text":"There's nothing exciting in the small hole, and it's pretty dirty. \nThere's no real reason to go into the hole.","room_small_hole_cd":"There's nothing exciting in the small hole, and it's pretty dirty. \nI suggest going back out.","room_tunnel":"Tunnel","room_tunnel_text":"It's quite moist in here. \nYou notice a small furry movement in the corner of your vision. \nIt's most likely a rat. A very large rat. Perhaps a mongoose. \nAt the end of the tunnel you find a stone chamber.","people_rat":"Rat","people_rat_text":"Upon further inspection, you determine that the furry \npresence is in fact a rat...the size of a small dog. He or She bites you. \nYou are very displeased.","room_stone_chamber":"StoneChamber","room_stone_chamber_text":"The whole rooms glows a dim green light. \nThe source of this light is a portal standing in the middle of the room. \nThis is obviously the portal of which the old man spoke.","room_portal":"Portal","room_portal_text":"You have been transported through time...","room_townsquare":"TownSquare","room_townsquare_text":"You are in a sunny and spacious town square. \nThere is a pedestal at the center of the cobblestone turnabout, but no statue on it. \nThe architecture is charming, but everyone here seems nervous for some reason.","people_citizen1":"RandomCitizen1","people_citizen1_text":"\"Excuse me,\" you begin. The man turns, startled. \n\"Oh, hello! Welcome to Terminus. You'll have to forgive me, but we're all \na little on edge lately, what with the Dark Wizard spreading corruption \nall along the coast.  You should be careful!\"","people_citizen2":"RandomCitizen2","people_citizen2_text":"The man looks up from his newspaper when he notices you staring. \n\"Have you read this?\" he exclaims, shaking the latest edition \nof \"The Last Word\" in your face.\n\"It says here the wizard's corruption has spread as far \nas Oston to the south, and New Console is completely unrecoverable!\nThese are dangerous times,\" he mutters, shaking his head and \nturning back to his reading.","people_citizen3":"DistraughtLady","people_citizen3_text":"The woman is sobbing uncontrollably, her face in her hands. \n\"My baby,\" she cries, \"They kidnapped my baby! I just \nknow that wizard had something to do with it.\"","room_market":"Marketplace","room_market_text":"Vendors and their goods line the streets.","people_vendor":"Vendor","people_vendor_text":"\" 'Ello there.\" The vendor smiles at you unpleasantly, \nrevealing a mouth full of gold teeth. \"Well? Wot are you looking for?\"","people_vendor_rm":"\"Ha! That spell doesn't work on everything, you know.\nI may have forgotten to mention that before I sold it to you...\"","item_rm_spell":"rmSpell","item_rm_spell_text":"\"Ah, yes, the rm spell,\" the Vendor muses. \n\"Simply say \"rm\" followed by the name of an item or person, \nand they will disappear from this plane... forever. \nD'you have the guts to use it, I wonder?\"","item_backpack":"Backpack","item_backpack_text":"There's a beat-up looking backpack on the \ntable with no price tag.  Its cloth looks frayed, but sturdy.\nYou glance quickly at the vendor, but his attention is elsewhere. \nMaybe you can move it in your home ...","item_backpack_stolen":"You just stole the backpack. \nGiven you have no job in a big coorporation, \nRichard Stallman shall be proud of you.","item_mkdir_spell":"mkdirSpell","item_mkdir_spell_text":"\"Make dreams into reality. Just say \"mkdir\" followed by any name that\npleases you, and you can create a new place that never existed there before.\nA little finicky, though...\" the Vendor mumbles.","room_library":"Library","room_library_text":"The Library is dimly lit and smells like mildew. \nStill, it's warm in here and the soft green carpet makes it seem kind of cozy.","item_radspellbook":"TotallyRadSpellbook","item_radspellbook_text":"Legends speak of a great word of power that allows the speaker to perform \nany action on any item. \"Sudo\", as the ancients called it, \nconveys complete mastery over the elements. \nUnfortunately, or perhaps fortunately, the mystical password has been lost \nto the sands of time.","item_romancebook":"PaperbackRomance","item_romancebook_text":"You flip the paperback open to a random page. \n\"Oh, Horatio!\" Antonia exclaimed, her bosom heaving as Horatio deftly ripped \n the bodice from her lithe frame. Horatio gave an animalistic growl and\nhe clasped her fingers in his strong hands and brought them to rest upon ...\n— You close the book, disinterested, and place it back on the shelf.","item_historybook":"HistoryOfTerminus","item_historybook_text":"It looks like an interesting book, but it's way too long and \nthe print is too tiny. Here is an excerpt:\n \nDarkWizard ...old tales tell of a DarkWizard who will fragment the land...\n...only the world-maker can stop the DarkWizard's virus from...\n...that the power of \"sudo\" may be the DarkWizard's only weakness...","item_nostalgicbook":"NostalgiaForHome","item_nostalgicbook_text":"The book says : \"If you ever get lonely for Home,\njust 'cd ~' and you'll go back there. \nBut just remember that it will be harder to come back.\"\n\n Later in the book, a story about loneliness says that \na Wizard with a rainbow pullover pink glasses,\nwas known to do instant movement from home to distant places.\nThe next page seems to explain how to, but it is torn apart.","item_vimbook":"VIMproved","item_vimbook_text":"While you open this book, a glow illuminates your eyes. \nYou've been blind for some seconds and the book disappear.","item_lever":"InconspicuousLever","item_lever_text":"You spot an inconspicuous lever behind the shelves.\nCurious, you pull it, and a panel slides open to reveal a secret back room.","room_backroom":"BackRoom","room_backroom_text":"You find a mysterious back room.\nYou find a librarian alone with a small elf.\nYou hope you're not interrupting.","item_grep":"Grep","item_grep_text":"\nThe exceptionally ugly elf turns to you with a sour expression. \n\"Greeeeeep,\" he says sullenly.","item_practicebook":"PracticeBook","item_practicebook_text":"Sally picked a peck\nOf seashelled peppers.\nA seashore of pickled pickles\ndid Peter and Sally pick.","people_librarian":"Librarian","people_librarian_text":"\"Hm? Oh, hello. I apologize for the mess,\nbut I'm very busy doing research on the dark wizard.\nWould you do me a favor? Go look up all references to DarkWizard in \nthe History of Terminus. My assistant Grep can help you.\" \nGrep eyes you balefully. \"Greeepp.\"\n\"To search the contents of the book, just type \"grep PHRASE ITEM\",\nwhere PHRASE is the phrase you want to search for, \nand ITEM is the name of the book you want to search.\nTry it with the PracticeBook here \n  - see if you can find the line with the word 'peppers' in it.\"","room_rockypath":"RockyPath","room_rockypath_text":"The weed-choked path leads off into the fields.","item_largeboulder":"LargeBoulder","item_largeboulder_text":"There is an enormous boulder blocking your way.\nIt's much too big to move.","item_largeboulder_rm":"The boulder disappears with a pop.","room_artisanshop":"ArtisanShop","room_artisanshop_text":"The walls of the shop are covered in clocks, all slightly out of sync.\nAt the workbench, a woman in an enormous pair of goggles \nis wielding a blowtorch with frightening enthusiasm.","item_strangetrinket":"StrangeTrinket","item_strangetrinket_text":"It looks like a crystal of some sort. It's very beautiful.","item_strangetrinket_rm":"Didn't your mother ever teach you that it's rude to rease other people's \nthings from their plane of existence?","item_strangetrinket_mv":"You can't take that, it's not yours!","item_dragon":"ClockworkDragon","item_dragon_text":"A dragon the size of a small dog is frolicking about the room. \nYou'd think it was real if it weren't for the wind-up key sticking out of its back.","item_dragon_rm":"Didn't your mother ever teach you that it's rude to erase other people's \nthings from their plane of existence?","item_dragon_mv":"You can't take that, it's not yours!","people_artisan":"Artisan","people_artisan_text":"The Artisan lifts up her goggles and peers at you in surprise. \n\"Are you the new assistant? You're late! ...  \nYou say you aren't my assistant? \nWell, that doesn't mean you can't make yourself useful.\nI need some gears, quickly! \n... \nYou don't even know how to make things? Hmph. Some assistant you are.\nJust say \"touch ITEM\" alright?\nWhere ITEM is the name of the thing you want to create. Now make me a Gear! Then come back.\"","item_gear":"gear","item_gear_artisans_ok":"Ah, Déjà fini ? J'ai l'impression que tu apprends vite. \nMerci pour ton aide.","item_gear_text":"This is a Gear","item_gear_touch":"Well that’s lovely, thank you, but you can’t expect me to make\nanything with just one gear! Can’t you copy it?\n...\n*sigh* I can see you are going to need a lot of training. Just say “cp [ITEM] [NEWITEM]”.\n[ITEM]’s the name of the item that you want copy, and [NEWITEM]’s the new name of the\ncopy, got it? Then poof! You’ll have shiny new item. I need five more gears so you’d better\nget started! Just call them gear1, gear2, gear3, gear4, and gear5, please.","room_farm":"Farm","room_farm_text":"There was once a farm of some sort here,\nbut now the fields are scorched and brown.","item_earofcorn":"EarOfCorn","item_earofcorn_text":"The corn is sad and withered-looking.","item_earofcorn_rm":"Why would you destroy a starving man's only food?","item_another_earofcorn":"AnotherEarOfCorn","item_another_earofcorn_text":"This is AnotherEarOfCorn","corn_farmer_ok":"It’s a miracle! Thank you, friend. May the Admin bless you.","people_farmer":"Farmer","people_farmer_text":"\"Ruined! I'm ruined! Look at these crops... almost nothing left!\nThe wizard's minions were here last week... they destroyed everything.\nHow will I feed my 3 children with just one ear of corn?\nI could really use AnotherEarOfCorn! \"","room_clearing":"Clearing","room_clearing_text":"There's a small grassy clearing here, with a man sitting on a stone, weeping.\nBehind him is a pile of rubble.","room_clearing_cd":" You can’t cross the bridge until you’ve replaced the missing Plank. ","people_cryingman":"CryingMan","people_cryingman_text":"\"You! You're a magic-user! I can tell, you've got that look. \nCome to finish the job, have you?\nWell, go ahead, do your worst there's nothing else you can take from me.\nNot since the rest of you were here a few days ago.\" \n\n\"What happened? You DARE to ask-- you know perfectly well what happened. \nYour friends, the wizard's minions, destroyed my house and kidnapped my \npoor daughter, that's what! My wife even went into town to look for help, \nand I haven't heard from her since!\" \n\n\"Hm? Well, I guess it's true that you don't look like one of the wizard's minions.\nStill, I don't trust you magicfolk. \nIf you really are who you say you are, then prove your good intentions \nby making me a new House!\"","room_house":"Maison","room_house_text":"This is a House","room_house_cd":"You are entering the House that you made.","room_house_ls":"You made this house for the man. How thoughtful of you!","room_clearing_less2":"Thank you for making me the House!  Why am I still crying?  These are tears of joy.  Can't a man openly express his emotions?","room_clearing_text2":"There's a small grassy clearing here, with a man sitting on a \n stone, weeping. Behind him is a pile of rubble and a small white house.","room_brokenbridge":"BrokenBridge","room_brokenbridge_text":"A creaky wooden bridges stretches across a chasm.\nBut it's missing a Plank, and the gap is too far to jump.","room_brokenbridge_text2":"A creaky rope bridges stretches across a chasm.","item_plank":"Plank","item_plank_text":"This is a Plank.","room_ominouspath":"OminousLookingPath","room_ominouspath_text":"The path leads toward a dark cave. It's an ordinary cobblestone path, but for \nsome reason it fills you with a sense of dread.","item_brambles":"ThornyBrambles","item_brambles_text":"This thicket of brambles is covered with wicked-looking thorns. You can't go around it, and you definitely aren't about to go through it. And yet something tells you that you really want to.","item_brambles_mv":"You can't touch them because they are covered with thorns. Ouch!","item_brambles_rm":"You speak the words of the Remove spell and the brambles glimmer a \ndeep blue. After fizzling for a minute, they disappear with a puff of smoke.","room_slide":"Slide","room_slide_text":"The slides is long. At the end, you see the KernelFiles.","room_slide_cd":"You have to get past the UglyTroll first.","room_slide_cd2":"It's just a Slide. Keep going. You're almost at the KernelFiles.","room_kernel":"KernelFiles","room_kernel_text":"The KernelFiles hold the sudo-secret (no, not pseudo). You'd better read the Instructions.","room_kernel_sudo":"Password:","room_kernel_IHTFP":"You have correctly entered the password. You are now in Paradise. Take a look around, and congratulations.","item_certificate":"Certificate","item_certificate_text":"You must read the Certificate with the sudo password.","item_instructions":"Instructions","item_instructions_text":"You've learned how to make use of your friend grep I see. If you haven't it might be wise for you to go back to the Library again to do some reading. Because here, you'll need to use him to help you. Here is your task: \nThere are a lot of items in the MoreKernelFiles room and one of them contains the sudo password. This password is very powerful password that lets you do absolutely anything in the world. It lets you cast a spell on any item that is protected in any way. You know the password is contained in one of these .txt items. You know that it appears on a line that says the word: 'password='. You should find it with grep's help. Then you'll need to use the sudo spell to find Paradise. To do this, just Type 'sudo' before the command you want to run, like so: 'sudo cp ITEM_A ITEM_B'. You will then be prompted for the sudo password. Type the password, and the spell that comes after sudo will be cast. If you open the Certificate in Paradise with sudo, you will have truly found Paradise.","room_morekernel":"MoreKernelFiles","room_morekernel_text":"There are so many files here!","item_bigfile":"%s_txt","item_bigfile_text":"Alice was beginning to get very tired of sitting by her \nsister on the bank, and of having nothing to do: once or twice she had peeped into the \nbook her sister was reading, but it had no pictures or conversations in it, 'and what is \nthe use of a book,' thought Alice 'without pictures or conversation?' \n\nSo she was considering in her own mind (as well as she could, for the hot day \nmade her feel very sleepy and stupid), whether the pleasure of making a \ndaisy-chain would be worth the trouble of getting up and picking the daisies, \nwhen suddenly a White Rabbit with pink eyes ran close by her.\n\nThere was nothing so VERY remarkable in that; nor did Alice think it \nso VERY much out of the way to hear the Rabbit say to itself, \n'Oh dear! Oh dear! I shall be late!' (when she thought it over afterwards, \nit occurred to her that she ought to have wondered at this, but at the \ntime it all seemed quite natural); but when the Rabbit actually TOOK A \nWATCH OUT OF ITS WAISTCOAT-POCKET, and looked at it, and then hurried on, \nAlice started to her feet, for it flashed across her mind that she had \nnever before seen a rabbit with either a waistcoat-pocket, or a watch \nto take out of it, and burning with curiosity, she ran across the \nfield after it, and fortunately was just in time to see it pop down \na large rabbit-hole under the hedge. \n\nIn another moment down went Alice after it, never once considering how \nin the world she was to get out again. \n\nThe rabbit-hole went straight on like a tunnel for some way, and then \ndipped suddenly down, so suddenly that Alice had not a moment to think \nabout stopping herself before she found herself falling down a very deep well.\n\nEither the well was very deep, or she fell very slowly, for she had \nplenty of time as she went down to look about her and to wonder what \nwas going to happen next. First, she tried to look down and make out what \nshe was coming to, but it was too dark to see anything; then she looked at \nthe sides of the well, and noticed that they were filled with cupboards and \nbook-shelves; here and there she saw maps and pictures hung upon pegs. She \ntook down a jar from one of the shelves as she passed; it was labelled \n'ORANGE MARMALADE', but to her great disappointment it was empty: she did \nnot like to drop the jar for fear of killing somebody, so managed to put it \ninto one of the cupboards as she fell past it. \n\n'Well!' thought Alice to herself, 'after such a fall as this, I shall \nthink nothing of tumbling down stairs! How brave they'll all think me \nat home! Why, I wouldn't say anything about it, even if I fell off the \ntop of the house!' (Which was very likely true.)\n\nDown, down, down. Would the fall NEVER come to an end! 'I wonder how \nmany miles I've fallen by this time?' she said aloud. 'I must be getting \nsomewhere near the centre of the earth. Let me see: that would be four \nthousand miles down, I think—' (for, you see, Alice had learnt several \nthings of this sort in her lessons in the schoolroom, and though this \nwas not a VERY good opportunity for showing off her knowledge, as \nthere was no one to listen to her, still it was good practice to say it \nover) '—yes, that's about the right distance—but then I wonder what \nLatitude or Longitude I've got to?' (Alice had no idea what Latitude was, \nor Longitude either, but thought they were nice grand words to say.)\n\nPresently she began again. 'I wonder if I shall fall right THROUGH the \nearth! How funny it'll seem to come out among the people that walk with \ntheir heads downward! The Antipathies, I think—' (she was rather glad \nthere WAS no one listening, this time, as it didn't sound at all the \nright word) '—but I shall have to ask them what the name of the country is, \nyou know. Please, Ma'am, is this New Zealand or Australia?' (and she \ntried to curtsey as she spoke—fancy CURTSEYING as you're falling through \nthe air! Do you think you could manage it?) 'And what an ignorant little \ngirl she'll think me for asking! No, it'll never do to ask: perhaps I \nshall see it written up somewhere.' \n\nDown, down, down. There was nothing else to do, so Alice soon began \ntalking again. 'Dinah'll miss me very much to-night, I should think!' \n(Dinah was the cat.) 'I hope they'll remember her saucer of milk at \ntea-time. Dinah my dear! I wish you were down here with me! There are \nno mice in the air, I'm afraid, but you might catch a bat, and that's \nvery like a mouse, you know. But do cats eat bats, I wonder?' And here \nAlice began to get rather sleepy, and went on saying to herself, in a \ndreamy sort of way, 'Do cats eat bats? Do cats eat bats?' and sometimes, \n'Do bats eat cats?' for, you see, as she couldn't answer either question, \nit didn't much matter which way she put it. She felt that she was \ndozing off, and had just begun to dream that she was walking hand \nin hand with Dinah, and saying to her very earnestly, 'Now, Dinah, \ntell me the truth: did you ever eat a bat?' when suddenly, thump! \nthump! down she came upon a heap of sticks and dry leaves, and the \nfall was over.\n\nAlice was not a bit hurt, and she jumped up on to her feet in a moment: \nshe looked up, but it was all dark overhead; before her was another \nlong passage, and the White Rabbit was still in sight, hurrying down \nit. There was not a moment to be lost: away went Alice like the wind, \nand was just in time to hear it say, as it turned a corner, 'Oh my \nears and whiskers, how late it's getting!' She was close behind it \nwhen she turned the corner, but the Rabbit was no longer to be seen: \nshe found herself in a long, low hall, which was lit up by a row \nof lamps hanging from the roof. \n\nThere were doors all round the hall, but they were all locked; \nand when Alice had been all the way down one side and up the other, \ntrying every door, she walked sadly down the middle, wondering how \nshe was ever to get out again.\n\nSuddenly she came upon a little three-legged table, all made of \nsolid glass; there was nothing on it except a tiny golden key, and \nAlice's first thought was that it might belong to one of the doors \nof the hall; but, alas! either the locks were too large, or the \nkey was too small, but at any rate it would not open any of them. \nHowever, on the second time round, she came upon a low curtain she \nhad not noticed before, and behind it was a little door about fifteen \ninches high: she tried the little golden key in the lock, and to her \ngreat delight it fitted! \n\nAlice opened the door and found that it led into a small passage, not \nmuch larger than a rat-hole: she knelt down and looked along the \npassage into the loveliest garden you ever saw. How she longed to \nget out of that dark hall, and wander about among those beds of bright \nflowers and those cool fountains, but she could not even get her head \nthrough the doorway; 'and even if my head would go through,' thought \npoor Alice, 'it would be of very little use without my shoulders. Oh, \nhow I wish I could shut up like a telescope! I think I could, if I \nonly know how to begin.' For, you see, so many out-of-the-way things \nhad happened lately, that Alice had begun to think that very few \nthings indeed were really impossible. \n\nThere seemed to be no use in waiting by the little door, so she went \nback to the table, half hoping she might find another key on it, or at \nany rate a book of rules for shutting people up like telescopes: this \ntime she found a little bottle on it, ('which certainly was not here \nbefore,' said Alice,) and round the neck of the bottle was a paper \nlabel, with the words 'DRINK ME' beautifully printed on it in large \nletters.\n\nIt was all very well to say 'Drink me,' but the wise little Alice was \nnot going to do THAT in a hurry. 'No, I'll look first,' she said, \n'and see whether it's marked \"poison\" or not'; for she had read \nseveral nice little histories about children who had got burnt, \nand eaten up by wild beasts and other unpleasant things, all because \nthey WOULD not remember the simple rules their friends had taught \nthem: such as, that a red-hot poker will burn you if you hold it \ntoo long; and that if you cut your finger VERY deeply with a knife, \nit usually bleeds; and she had never forgotten that, if you drink \nmuch from a bottle marked 'poison,' it is almost certain to \ndisagree with you, sooner or later. \n\nHowever, this bottle was NOT marked 'poison,' so Alice ventured to \ntaste it, and finding it very nice, (it had, in fact, a sort of mixed \nflavour of cherry-tart, custard, pine-apple, roast turkey, toffee, \nand hot buttered toast,) she very soon finished it off.","room_paradise":"Paradise","room_paradise_text":"You have truly found Paradise with the sudo password. \nCongratulations.","room_paradise_ls":"There's really nothing interesting in Paradise.","room_trollcave":"CaveOfDisgruntledTrolls","room_trollcave_text":"The cave is dark and smells like... feet? Oh, right, it's probably the trolls. \nThere's a scared-looking kid in a cage by the far wall.","people_troll1":"UglyTroll","people_troll1_text":"He looks mad, and really ugly.","people_troll1_mv":"The troll looks briefly surprised, then moves away.\nHe's mostly harmless anyway.","people_troll1_rm":"The troll looks briefy surprised, then vanishes \nwith an unpleasant squelching sound.","people_troll1_cp":"They're multiplying!","people_troll2":"UglierTroll","people_troll2_text":"He looks mad, and really, really ugly. \nBut he wants to tell you something. Between his \ngarbled grunts, you manage to understand the following: \nYou can cast spells on items that you don't currently see. For example, if you want \nto copy an item from this room to the OminousLookingPath from which you came, you can \ncp [ITEM_TO_COPY] ../[NEW_ITEM_NAME]. You can do this for most spells and most rooms. \nUse this knowledge wisely. Remember.... you can't undo an 'rm' spell.","people_supertroll":"AbsolutelyHideousTroll","people_supertroll_text":"You probably don't want to look at this guy. Oops, too late.","people_supertroll_rm":"The troll belches spectacularly, and you could swear he actually smirks. You won't get rid of him that easily, not without the 'sudo password'. It's not 'pseudo', it's 'sudo'. You'll find that in KernelFiles. But first you have to get past the UglyTroll to the Slide.","people_supertroll_mv":"If you move him out of the cave, he'll terrorize the countryside.\nAlso he will probably eat you.","room_cage":"Cage","room_cage_text":"There's a scared-looking kid in there.","room_cage_cd":"You can’t squeeze through the bars. Anyway, are you crazy? Why would you want to go into a cage?","people_kidnapped":"KidnappedChild","people_kidnapped_text":"You know it's kind of mean,\nbut you can't help but think that that is one funny-looking kid.","people_kidnapped_mv":"The kid looks around, dazed, surprised to find himself out of the cage. \nYou smile at him and speak in a gentle voice. 'You should probably be getting home, \nlittle boy. Someone is there waiting for you.' \n'I'm a girl,' says the little girl smartly. Then she dashes past you, out of the cave, and \nruns up the ominous path towards home.","room_cluster":"AthenaCluster","room_cluster_text":"None shall pass without the combination. You \nhave one chance to enter the combination. Enter password:","room_cluster_ls":"You must enter the Athena cluster combo first.","room_cluster_cd":"None shall pass without the combination. You\nhave one chance to enter the combination. Enter password:","item_workstation":"Workstation","item_workstation_text":"The Workstation has resources you can use to \naccess files in a joint Athena locker. It adds new rooms (when they're in your Home we \ncall them lockers) to your Home, and you can \nadd them to your collection of lockers if you have permission. If you know what you want to add \nto your Home (the name of the locker you want, of course), just 'add LOCKERNAME'. It \ngives you extra spells (if you learn them), and gives you more Rooms to explore.\n","room_mit":"MIT","room_mit_text":"You have arrived by magic carpet to MIT!","room_mit_terminus":"You have correctly entered the cluster combo. Entering the AthenaCluster.","item_mitletter":"AdmissionLetter","item_mitletter_text":"Congratulations on entering MIT! \nHere you will learn special spells that you can only use at MIT. Enjoy!","room_stata":"StataCenter","room_stata_text":"The center of computer science and artificial intelligence research at MIT. Lots of magic happens here, including TAs, grad students, etc.","people_gradstudent":"WaryEyeOfGradStudent","people_gradstudent_text":"If you so desire, you can add \na new MagicLocker outside your Home. In this MagicLocker you can find some tools that \nwill be useful in your time at MIT (and beyond). There you can find portals to \nother places, you can write notes, and you can store various items you collect in \nyour travels in the MagicLocker. But first you need to go to the AthenaCluster and \nlearn how.","people_assistant":"HelpfulTA","people_assistant_text":"Ah, welcome to the wonderful land of Stata. \nThere's one room here that you'll need the combination for. All you have to do is ask:\n'tellme combo'.","room_magiclocker":"MagicLocker","room_magiclocker_text":"This contains items and spells that can be used anywhere in the world after you add the locker. More is coming.","item_morecoming":"MoreComing","item_morecoming_text":"The MagicLocker contains Items that can be \nused (and spells that can be used) anywhere else in the game once you add \nthe locker. MIT is making updates to the locker at all times, so check back \nfrequently.","man_cd":"(Choisis ta destination) Utilises \"cd\" pour explorer le monde. \nIl faut écrire : cd LIEU_DE_DESTINATION","man_mv":"(MouVement). \nUtilises \"mv\" pour déplacer un objet. \nIl faut écrire : mv OBJET LIEU_DE_DESTINATION","man_ls":"(Regarde autour de toi). \nUtilises \"ls\" pour voir ce qui se trouve dans un lieu donné. \nSoit tu observe là où tu es, soit tu observe un autre lieu.\nIl faut écrire : \n  ls              (pour voir autour de toi) \n-OU- \n  ls LOCATION     (pour voir là où tu ne peux pas choisir ta destination \"cd\" )\n","man_less":"(Lire, Examiner ou parler). \nUtilises \"less\" pour connaître les secrets liés à un objet. \nIl faut écrire : \n  less ITEM\n","man_man":"Je suis le manuscrit ancien, et je possède le savoir indispensable aux sorciers.\nVoici les sorts que je pourais t'enseigner : cd, ls, rm, mv, exit, help, man, touch, grep, pwd.","man_help":"Écris \"man COMMANDE\" si tu as oublié comment utiliser une commande.","man_exit":"(quitter) \nUtilises \"exit\" pour quitter le jeu.","man cp":"(CoPy)\nUtilises \"cp\" pour cloner un item. \nIl faut écrire :\n  cp ITEM NEWNAME \n","man_pwd":"(Te montre là où tu es) \nIl faut écrire : \n  \"pwd\" \n","man_grep":"(gReP : Récupère des parties) \nUtilises \"grep\" pour trouver les parties d'un texte qui contiennent le mot magique.\nIl faut écrire : \n  grep MOT_MAGIQUE LÀ_OU_TU_CHERCHE ","man_touch":"(Touche) En touchant un objet (même imaginaire), tu le fait (re)naître comme neuf.\nUtilises \"touch\"  pour créer de nouveaux objets.\nIl faut écrire :\n  touch OBJET","man_tellme":"(tellme combo)tells you the combination for the AthenaCluster rooms at MIT.\nIl faut écrire :\n  tellme combo"};function objToStr(e){return e.toString()}function d(e,t){return void 0===e?t:e}function def(e){return void 0!==e}function ndef(e){return void 0===e}function pushDef(e,t){void 0!==e&&t.push(e)}function hdef(e,t,n){ndef(e[t])&&(e[t]=[]),e[t].push(n)}function _(e,t,n){return t=d(t,[]),n=d(n,""),e in dialog?dialog[e].printf(t):("function"==typeof pogen&&pogen(e),n&&n in dialog?dialog[n].printf(t):e+t.join(" "))}function gettext_check(){"function"==typeof pogen_deliver&&pogen_deliver()}function Cookie(e,t){this.name=e,this.minutes=t}function GameState(e){this.params={"":e.name},this.actions={},this.cookie=null}function EventTarget(){this._listeners={}}function commonprefix(e){for(var t=e.concat().sort(),n=t[0],i=t[t.length-1],o=n.length,r=0;r<o&&n.charAt(r)===i.charAt(r);)r++;return n.substring(0,r)}function addspace(e){return e+" "}function VTerm(e,t,n,i,o){var r=dom.Id(t),m=dom.El("p");m.className="input";var s=dom.El("input");s.autofocus="autofocus",s.size=80;var a=this,d=dom.El("button");d.onclick=function(e){a.make_suggestions()};var l=dom.El("button");l.onclick=function(e){a.enter()},l.className="key",l.innerText="↵",d.className="key",d.innerText="↹";var c=dom.El("div");c.className="suggest",m.appendChild(s),m.appendChild(d),m.appendChild(l),m.appendChild(c),r.appendChild(m),this.suggestions=c,this.cmdline=m,this.input=s,this.container=r,this.context=e,this.img_mode=i.charAt(0),this.img_dir=o,this.img_element=n?dom.Id(n):m,this.imgs=[],this.history=[],this.histchecking=!1,this.histindex=0}function Pic(e,t,n){this.src=e,this.alt=d(t,_(e+"_alt")),this.title=d(n,_(e+"_title"))}function Item(e,t,n){this.itemname=e,this.picture=n?new Pic(n):img.item_none,this.cmd_text={less:t||_("item_none_text")},this.valid_cmds=["less"]}function People(e,t,n,i,o){this.itemname=e,this.picture=n?new Pic(n):img.people_none,this.cmd_text={less:t||_("people_none_text")},this.valid_cmds=["less"],this.people=!0}function Room(e,t,n,i,o,r){this.name=r,this.parents=[],this.previous=this,this.children=[],this.items=[],this.commands=["cd","ls","less","man","help","exit","pwd"],this.fire=null,this.room_name=d(e,_("room_none")),this.intro_text=d(t,_("room_none_text")),this.room_pic=d(new Pic(n),img.room_none),this.cmd_text={pwd:_("cmd_pwd",[this.room_name])},this.starter_msg=null,this.ev=new EventTarget,this.cmd_inside_spec=d(i,{}),global_spec[this.room_name]=d(o,{}),EventTarget.call(this)}function newRoom(e,t,n,i){var o="$"+e,r=new Room(_("room_"+e,[],or="room_none"),_("room_"+e+"_text",[],or="room_none_text"),t,n,i,o);return window[o]=r,r}function enterRoom(e,t){return t.push_img(null),t.setContext(e),state.setCurrentRoom(e),[e.toString(),e.intro_text]}function start_game(){vt=new VTerm(null,"term",null,"follow","./img/"),state.loadCookie("terminuscookie",10080)?vt.show_msg(_("game_loaded")):vt.show_msg(_("gamestart_text")),gettext_check(),vt.start(state.getCurrentRoom()),console.log("Game loaded")}function link_rooms(e,t){t in e.children||e.addChild(t),e in t.parents||t.addParent(e)}var dom=document;dom.Id=dom.getElementById,dom.Add=dom.appendChild,dom.El=dom.createElement,String.prototype.printf=function(e){var t=-1;return this.replace(/\%[sd]/g,function(n,i){return t++,e[t]})},Cookie.prototype={parse:function(e){for(var t=null,n=e.split(";"),i=0;i<n.length;i++){for(var o=n[i];" "==o.charAt(0);)o=o.substring(1,o.length);if(0===o.indexOf(this.name)){t={};var r=o.split("=");r.shift();for(var m=0;m<r.length;m++){var s=r[m].split(":");2==s.length&&"undefined"!==s[1]&&(t[s[0]]=s[1])}break}}return t},stringify:function(e){var t="";for(var n in e)e.hasOwnProperty(n)&&(t+=n+":"+e[n]+"=");return t},read:function(){return this.parse(dom.cookie)},write:function(e){var t=new Date;t.setTime(t.getTime()+60*this.minutes*1e3),dom.cookie=this.name+"="+this.stringify(e)+"; expires="+t.toGMTString()+"; path=/"},destroy:function(){this.minutes=-1,this.write("")}},GameState.prototype={getCurrentRoom:function(){return window[this.params[""]]},setCurrentRoom:function(e){this.params[""]=e.name,this.cookie&&this.cookie.write(this.params)},add:function(e,t){this.actions[e]=t},apply:function(e,t){this.params[e]=1,e in this.actions&&this.actions[e](void 0!==t&&t)},loadCookie:function(e,t){this.cookie=new Cookie(e,t);this.currentRoom;var n=this.cookie.read();if(n){""in n&&(this.params[""]=n[""],delete n[""]);for(var i in n)n.hasOwnProperty(i)&&this.apply(i,n[i]);return!0}return!1}},EventTarget.prototype={constructor:EventTarget,addListener:function(e,t){hdef(this._listeners,e,t)},fire:function(e){if("string"==typeof e&&(e={type:e}),e.target||(e.target=this),!e.type)throw new Error("Event object missing 'type' property.");if(this._listeners[e.type]instanceof Array)for(var t=this._listeners[e.type],n=0,i=t.length;n<i;n++)t[n].call(this,e)},removeListener:function(e,t){if(this._listeners[e]instanceof Array)for(var n=this._listeners[e],i=0,o=n.length;i<o;i++)if(n[i]===t){n.splice(i,1);break}}},VTerm.prototype={start:function(e){this.setContext(e),this.behave()},setContext:function(e){this.context=e,this.show_suggestions(this.context.commands.map(addspace))},push_img:function(e){this.imgs.push(e)},show_img:function(){var e=this.img_element,t=this;if(this.imgs.length>0){if("s"===this.img_mode)(o=this.imgs.pop()).hasOwnProperty("src")?(e.setAttribute("src",this.img_dir+o.src),e.setAttribute("alt",o.alt),e.setAttribute("title",o.title)):(e.setAttribute("src",this.img_dir+o.room_none.src),e.setAttribute("alt",o.room_none.alt),e.setAttribute("title",o.room_none.title));else{var n=dom.El("div");n.className="img-container";for(var i in this.imgs)if(this.imgs.hasOwnProperty(i)){var o=this.imgs[i];if(o&&o.alt.length>0){var r=dom.El("img");r.src=this.img_dir+o.src,r.title=o.title,r.alt=o.alt,n.appendChild(r),r.onload=function(){window.scrollTo(0,t.cmdline.offsetTop+t.cmdline.offsetHeight)}}}this.container.insertBefore(n,e)}this.imgs=[]}},show_previous_prompt:function(e){var t=dom.El("p");t.innerText=e,t.className="input",this.container.insertBefore(t,this.cmdline)},get_line:function(){return this.input.value.replace(/\s+/," ")},set_line:function(e){this.input.value=e},show_msg:function(e){var t=dom.El("p");t.innerText=e,t.className="msg",this.container.insertBefore(t,this.cmdline)},make_suggestions:function(e){var t=this,n=d(e,!0);t.suggestions.innerHTML="";var i=t.get_line();if(args=i.split(" "),args.length>0){var o;if(args.length>1){o=args.pop();var r=t.context._completeArgs(args[0],o)}else o="",r=t.context.commands.map(addspace);if(0==r.length)t.set_line(i+"?"),setTimeout(function(){t.set_line(i+"??")},100),setTimeout(function(){t.set_line(i)},200);else if(1==r.length)if(n){var m=o.split("/");m.pop(),m.push(r[0]),args.push(m.join("/")),t.set_line(args.join(" "))}else t.show_suggestions(r);else{var s=commonprefix(r);t.show_suggestions(r),s.length>0&&n&&(args.push(s),t.set_line(args.join(" ")))}}},show_suggestions:function(e){for(var t=0;t<e.length;t++)this.show_suggestion(e[t])},show_suggestion:function(e){var t=dom.El("button");t.innerHTML=e;var n=this;n.histindex=0,t.onclick=function(t){var i=n.get_line()+e;n.set_line(i),n.argsValid(i.replace(/\s+$/,"").split(" "))?n.enter():n.make_suggestions(!1)},n.suggestions.appendChild(t)},hide_suggestions:function(){this.suggestions.innerHTML=""},argsValid:function(e){return this.context._validArgs(e.shift(),e)},enter:function(){var e=this,t=e.input;e.histindex=0,args=e.get_line().replace(/\s+$/,"").split(" "),echo=e.context.exec(e,args),e.show_previous_prompt(t.value),e.history.push(t.value),e.show_img(),e.show_msg(echo),e.set_line(""),e.hide_suggestions(),e.show_suggestions(this.context.commands.map(addspace))},behave:function(){var e=this,t=e.input,n=this.container,i=e.context.getStarterMsg(e);i&&(e.show_img(),e.show_msg(i)),dom.body.onkeydown=function(n){var i=(n=n||window.event).which;if(33===i||34===i||38===i||40===i);else{var o=d.activeElement;o&&o==t||(t.focus(),window.scrollTo(0,e.cmdline.offsetTop+e.cmdline.offsetHeight)),t.onkeydown(n)}},n.onclick=function(e){t.focus()},window.onbeforeunload=function(e){return"Quit the game ?"},t.onkeydown=function(e){var n=e.which,i=!1;if(9===n||13==n?i=!0:e.ctrlKey?67!==n&&88!==n&&86!==n&&89!==n&&90!==n||(i=!0):33!==n&&34!==n||(window.focus(),t.blur()),38!==n&&40!==n||(i=!0),i)return e.preventDefault(),e.stopPropagation(),!1},t.onkeyup=function(n){var i=n.which,o=!1;if(e.hide_suggestions(),13===i)o=!0,e.enter(),window.scrollTo(0,e.cmdline.offsetTop+e.cmdline.offsetHeight);else if(9!==n.which||n.ctrlKey||n.altKey){if(37===i||39===i);else if(n.ctrlKey){if(67===i)o=!0,e.show_previous_prompt(e.get_line()+"^C"),e.set_line("");else if(88===i||86===i||89===i||90===i){o=!0;var r=e.get_line(),m=(r=r.replace(/\/$/,"")).split(" "),s=m.pop().split("/");s.pop(),s.length>1&&s.push(""),m.push(s.join("/")),e.set_line(m.join(" "))}}else if(33===i||34===i)window.focus(),t.blur();else if(40===i)e.histindex>0&&(e.histindex--,e.set_line(e.history[e.history.length-1-e.histindex]));else if(38===i&&e.histindex<e.history.length){var a=e.history[e.history.length-1-e.histindex];if(0==e.histindex){var d=e.get_line();d.length>0&&d!==a&&e.history.push(d)}e.set_line(a),e.histindex++}}else o=!0,e.make_suggestions(),window.scrollTo(0,e.cmdline.offsetTop+e.cmdline.offsetHeight);if(o)return n.stopPropagation(),n.preventDefault(),!1}}},img={room_none:new Pic("none.gif","",""),people_none:new Pic("none.gif","",""),item_none:new Pic("none.gif","","")},Item.prototype={addCmdText:function(e,t){return this.cmd_text[e]=t,this},addValidCmd:function(e){return this.valid_cmds.push(e),this},toString:function(){return this.itemname},changePic:function(e){this.picture=new Pic(e)}},People.prototype.addCmdText=Item.prototype.addCmdText,People.prototype.addValidCmd=Item.prototype.addValidCmd,People.prototype.toString=Item.prototype.toString,People.prototype.changePic=Item.prototype.changePic,String.prototype.replaceAll=function(e,t){for(ret=this.toString();ret.indexOf(e)>0;)ret=ret.replace(e,t);return ret};var global_spec={};Room.prototype={toString:function(){return this.room_name},fire_event:function(e,t,n,i){var o=null,r={room:this,arg:t[n],args:t,i:n};"string"==typeof i?i in global_spec&&e in global_spec[i]&&(o=global_spec[i][e](r)):e in this.cmd_inside_spec&&(o=this.cmd_inside_spec[e](r)),o&&this.ev.fire(o)},getStarterMsg:function(e){return this.starter_msg?this.starter_msg:this.cmd_text.pwd},setStarterMsg:function(e){this.starter_msg=e},changeIntroText:function(e){this.intro_text=e},addItem:function(e){return pushDef(e,this.items),this},newItem:function(e,t){var n=new Item(_("item_"+e,[],"item_none"),_("item_"+e+"_text",[],"item_none_text"),t);return this.addItem(n),n},newPeople:function(e,t){var n=new People(_("people_"+e,or="people_none"),_("people_"+e+"_text",or="people_none_text"),t);return this.addItem(n),n},newItemBatch:function(e,t,n){for(var i,o,r=[],m=0;m<t.length;m++)i=_("item_"+e,[t[m]],or="item_none"),o=_("item_"+e+"_text",[t[m]],or="item_none_text"),r[m]=new Item(i,o,n),this.addItem(r[m]);return r},removeItemByIdx:function(e){return-1==e?null:this.items.splice(e,1)[0]},idxItemFromName:function(e){return this.items.map(objToStr).indexOf(e)},idxChildFromName:function(e){return this.children.map(objToStr).indexOf(e)},getItemFromName:function(e){return idx=this.idxItemFromName(e),-1==idx?null:this.items[idx]},getChildFromName:function(e){return idx=this.children.map(objToStr).indexOf(e),-1==idx?null:this.children[idx]},addChild:function(e){pushDef(e,this.children)},removeChild:function(e){index=this.children.indexOf(e),-1!=index&&this.children.splice(index,1)},childrenStringArray:function(e){return this.children.map(objToStr)},addParent:function(e){this.parents[0]=e},addListener:function(e,t){return this.ev.addListener(e,t),this},addInsideEvt:function(e,t){return this.cmd_inside_spec[e]=t,this},removeInsideEvt:function(e){return delete this.cmd_inside_spec[e],this},addOutsideEvt:function(e,t){return global_spec[this.room_name][e]=t,this},removeOutsideEvt:function(e){return delete global_spec[this.room_name][e],this},addCommand:function(e){return this.commands[this.commands.length]=e,this},removeCommand:function(e){return index=this.commands.indexOf(e),-1!=index&&this.commands.splice(index,1),this},addCmdText:function(e,t){return this.cmd_text[e]=t,this},removeCmdText:function(e){return delete this.cmd_text[e],this},traversee:function(e){var t,n=e.split("/"),i=this,o=null;for(t=0;t<n.length-1;t++){if(!i)return _("room_unreachable");i=i.can_cd(n[t])}for(t=0;t<i.items.length;t++)if(n[n.length-1]===i.items[t].toString()){o=n[n.length-1];break}return o||(i=i.can_cd(n[n.length-1])),[i,o]},ls:function(e,t){if(!(e.length>0))return t.push_img(this.room_pic),this.printLS();var n=this.traversee(e[0])[0];return n?0==n.children.length&&0==n.items.length?_("room_empty"):n.printLS():void 0},printLS:function(){var e="";this.children.length>0&&(e+=_("directions",[" "+this.children.toString().replaceAll(",","\n ")])+"\n");var t=this.items.filter(function(e){return!e.hasOwnProperty("people")}),n=this.items.filter(function(e){return e.hasOwnProperty("people")});return t.length>0&&(e+=_("items",[" "+t.toString().replaceAll(",","\n ")])+"\n"),n.length>0&&(e+=_("peoples",[" "+n.toString().replaceAll(",","\n ")])+"\n"),e},cd:function(e,t){if(e.length>1)return _("cmd_cd_flood");if("-"!==e[0]){if(0===e.length)return $home.previous=this,enterRoom($home,t),_("cmd_cd_home");if(".."===e[0])return this.fire_event("cd",e,0),this.parents.length>=1?(this.parents[0].previous=this,_("cmd_cd_parent",enterRoom(this.parents[0],t))):_("cmd_cd_no_parent");if("~"===e[0])return $home.previous=this,enterRoom($home,t),_("cmd_cd_home");if("."===e[0])return t.push_img(null),_("cmd_cd",enterRoom(this,t));var n=this.traversee(e[0])[0];return n?n.commands.indexOf("cd")>-1?(n.previous=this,_("cmd_cd",enterRoom(n,t))):(this.fire_event("cd",e,0,n.room_name),n.cmd_text.cd):_("cmd_cd_failed",e)}this.previous.previous=this,enterRoom(this.previous,t)},can_cd:function(e){if(void 0===e||e.indexOf("/")>-1)return!1;if(".."===e)return this.parents[0];if("."===e)return this;for(var t=0;t<this.children.length;t++)if(e===this.children[t].toString())return this.children[t];return!1},less:function(e,t){if(e.length<1)return _("cmd_less_invalid");var n=this.traversee(e[0]),o=n[0],r=n[1];for(i=0;i<o.items.length;i++)if(r===o.items[i].toString()){t.push_img(o.items[i].picture);var m=o.items[i].cmd_text.less;return o.fire_event("less",e,0),m}return _("cmd_less_invalid",e)},man:function(e){return _(e.length<1?"cmd_man_no_query":"man_"+e[0]in dialog?"man_"+e[0]:"cmd_man_not_found")},help:function(e){return _("cmd_help_suggestion")},exit:function(e){return this.commands=[],setTimeout(function(){dom.body.innerHTML=_("cmd_exit_html")},2e3),_("cmd_exit")},pwd:function(e,t){return t.push_img(this.room_pic),""},mv:function(e){if(2!=e.length)return _("cmd_mv_flood");var t=this.idxItemFromName(e[0]),n=this.idxChildFromName(e[1]);return t>=0&&n>=0?(itemtoadd=this.items[t],this.children[n].addItem(itemtoadd),this.fire_event("mv",e,0),this.removeItemByIdx(t),_("cmd_mv_done",e)):_("cmd_mv_invalid")},rm:function(e){if(e.length<1)return _("cmd_rm_miss");for(var t="",n=0;n<e.length;n++){if(idx=this.idxItemFromName(e[n]),-1!=idx){if(!(this.items[idx].valid_cmds.indexOf("rm")>0))return _("cmd_rm_invalid");var i=this.removeItemByIdx(idx);i?(this.fire_event("rm",e,n),"rm"in i.cmd_text?t+=i.cmd_text.rm+"\n":t+=_("cmd_rm_done",[e[n]])):t+=_("cmd_rm_failed")}return t}},grep:function(e){if(this.commands.indexOf("grep")>0){var t=e[0],n=this.getItemFromName(e[1]);if(n){var i=n.cmd_text.less.split("\n");return jQuery.grep(i,function(e){return e.indexOf(t)>0}).join("\n")}return"Not a valid item to search in."}return _("cmd_unknown")},touch:function(e){if(e.length<1)return _("cmd_touch_nothing");for(var t="",n=e.length-1;n>=0;n--)e[n].length>0&&(this.addItem(new Item(e[n],_("item_intro",[e[n]]))),t+=e[n],this.fire_event("touch",e,n));return""===t?_("cmd_touch_none"):_("cmd_touch_created",[t])},cp:function(e){if(2!=e.length)return _("incorrect_syntax");var t=e[0],n=e[1],i=this.getItemFromName(t);if(i){var o=new Item(n);return o.picture=i.picture,o.cmd_text=i.cmd_text,o.valid_cmds=i.valid_cmds,this.addItem(o),this.fire_event("cp",e,0),_("cmd_cp_copied",[t,n])}return _("cmd_cp_unknown")},terminus:function(e){var t=this.cmd_text.terminus;return this.ev.fire("AthenaComboEntered"),t},tellme:function(e){return _("combo"===e[0]?"combo":"incorrect_syntax")},mkdir:function(e){return this.commands.indexOf("mkdir")>0?1===e.length?(link_rooms(this,new Room(e[0])),this.fire_event("mkdir",e,0),_("room_new_created",e)):_("incorrect_syntax"):_("cmd_unknown")},sudo:function(e){return this.commands.indexOf("sudo")>0?"less"===e[0]&&"Certificate"===e[1]?void this.ev.fire("tryEnterSudo"):_("room_wrong_syntax"):_("cannot_cast")},IHTFP:function(e){if(this.commands.indexOf("IHTFP")>0){if(0===e.length){var t=this.cmd_text.IHTFP;return this.ev.fire("sudoComplete"),t}return _("room_wrong_password")}return _("invalid_spell")},add:function(e){return this.commands.indexOf("add")>0?"MagicLocker"===e[0]?(this.ev.fire("addMagicLocker"),void 0===this.cmd_text.add?_("lock_added",e):this.cmd_text.add):_("invalid_locker"):_("invalid_spell")},exec:function(e,t){var n=t[0];if(t.push(t.pop().replace(/\/$/,"")),!(this.commands.indexOf(n)>-1))return"Command '"+n+"' not found in room '"+this.room_name+"'";var i=this[n](t.slice(1),e);return i||(n in this.cmd_text?this.cmd_text[n]:void 0)},_validArgs:function(e,t){return console.log(e,t),"ls"==e||1==t.length&&("cd"==e||"mkdir"==e||"less"==e||"touch"==e)},_completeArgs:function(e,t){var n,i="~"==t.substring(0,1)?$home:this,o=(t.charAt(t.length-1),t.split("/")),r=[],m=[];for(room_num=0;room_num<o.length;room_num++)if(n=i.can_cd(o[room_num]))i=n,room_num===o.length-1&&(r=[n.room_name+"/"]);else if(room_num==o.length-1){if("cd"==e||"ls"==e||"less"==e||"mv"==e)for(child_num=0;child_num<i.children.length;child_num++)i.children[child_num].room_name.match("^"+o[room_num])&&m.push(i.children[child_num].room_name+"/");if("cp"==e||"mv"==e||"less"==e||"grep"==e||"touch"==e||"rm"==e||"sudo"==e)for(item_num=0;item_num<i.items.length;item_num++)i.items[item_num].itemname.match("^"+o[room_num])&&m.push(i.items[item_num].itemname);"man"==e&&(r=this.commands),r=m}return r}},newRoom("home","loc_farm.gif"),$home.newItem("welcome_letter");var state=new GameState($home),vt;newRoom("western_forest","loc_forest.gif"),$western_forest.newItem("western_forest_academy_direction","loc_forest.gif"),$western_forest.newItem("western_forest_back_direction","loc_forest.gif"),newRoom("spell_casting_academy","loc_academy.gif").newPeople("academy_student","item_student.gif"),newRoom("academy_practice","loc_practiceroom.gif").addCommand("mv").newItem("academy_practice","item_manuscript.gif"),$academy_practice.newItemBatch("practice_dummy",[1,2,3,4,5],"item_dummy.gif"),newRoom("box","item_box.gif").removeCommand("cd").addCmdText("cd",_("room_box_cd")),newRoom("meadow","loc_meadow.gif").newPeople("poney","item_fatpony.gif"),newRoom("mountain","loc_mountains.gif").newPeople("man_sage","item_mysteryman.gif"),$mountain.newItem("man","item_manuscript.gif"),newRoom("lessons","loc_classroom.gif").newPeople("professor","item_professor.gif"),newRoom("cave","loc_cave.gif"),newRoom("dark_corridor","loc_corridor.gif"),newRoom("staircase","loc_stair.gif").newItem("dead_end","item_sign.gif"),newRoom("dank","loc_darkroom.gif",{mv:function(e){return"Boulder"==e.arg?"mvBoulder":""}}).addCommand("mv").addListener("mvBoulder",function(){state.apply("mvBoulder")}).newItem("boulder","item_boulder.gif"),state.add("mvBoulder",function(e){link_rooms($dank,$tunnel),e&&($small_hole.addItem(Boulder),$dank.removeItem(_("item_boulder")))}),newRoom("small_hole","none.gif").addCmdText("cd",_("room_small_hole_cd")),newRoom("tunnel","loc_tunnel.gif").newPeople("rat","item_rat.gif"),newRoom("stone_chamber","loc_portalroom.gif"),newRoom("portal","item_portal.gif"),newRoom("townsquare","loc_square.gif"),$townsquare.newPeople("citizen1","item_citizen1.gif"),$townsquare.newPeople("citizen2","item_citizen2.gif"),$townsquare.newPeople("citizen3","item_lady.gif"),newRoom("market","loc_market.gif").addCommand("rm").addCommand("mv"),$market.newPeople("vendor","item_merchant.gif").addCmdText("rm",_("people_vendor_rm")),$market.newItem("backpack","item_backpack.gif").addCmdText("mv",_("item_backpack_stolen")),$market.newItem("rm_spell","item_manuscript.gif"),$market.newItem("mkdir_spell","item_manuscript.gif"),newRoom("library","loc_library.gif",{less:function(e){return e.arg==_("item_lever")?"pullLever":e.arg==_("item_vimbook")?"openVim":""}}).addCommand("grep").addListener("pullLever",function(){state.apply("pullLever")}).addListener("openVim",function(){$library.removeItem(_("item_vimbook"))}),$library.newItem("radspellbook","item_radspellbook.gif"),$library.newItem("romancebook","item_romancenovel.gif"),$library.newItem("historybook","item_historybook.gif"),$library.newItem("nostalgicbook","item_historybook.gif"),$library.newItem("vimbook","item_historybook.gif"),$library.newItem("lever","item_lever.gif"),state.add("pullLever",function(e){link_rooms($library,$backroom)}),newRoom("backroom","loc_backroom.gif").addCommand("grep"),$backroom.newItem("grep","grep.gif"),$backroom.newItem("practicebook"),$backroom.newPeople("librarian","item_librarian.gif"),newRoom("rockypath","loc_rockypath.gif",{rm:function(e){return e.arg==_("item_largeboulder")?"rmLargeBoulder":""}}).addListener("rmLargeBoulder",function(){state.apply("rmLargeBoulder")}).addCommand("rm"),state.add("rmLargeBoulder",function(e){link_rooms($rockypath,Farm),e&&$rockypath.removeItem(_("item_largeboulder"))}),$rockypath.newItem("largeboulder","item_boulder.gif").addCmdText("rm",_("item_largeboulder_rm")).addValidCmd("rm"),newRoom("artisanshop","loc_artisanshop.gif",{touch:function(e){if(e.arg===_("item_gear"))return"touchGear"},cp:function(e){if(new RegExp(_("item_gear")+"d").test(e.arg))for(var t=1;t<6;t++)return-1==e.room.getItemFromName(_("item_gear")+t)?"":"FiveGearsCopied"}}).addCommand("touch").addListener("touchGear",function(){state.apply("touchGear")}).addListener("FiveGearsCopied",function(){state.apply("FiveGearsCopied")}),state.add("touchGear",function(e){Artisan.addCmdText("less",_("item_gear_touch")),$artisanshop.addCommand("cp"),e?$artisanshop.addItem(new Item("Gear",_("item_gear_text"),"item_gear.gif")):$artisanshop.getItemFromName("Gear").changePic("item_gear.gif")}),state.add("FiveGearsCopied",function(e){Artisan.addCmdText("less",_("item_gear_artisans_ok")),e&&$artisanshop.newItemBatch("gear",["1","2","3","4","5"])}),$artisanshop.newItem("strangetrinket","item_trinket.gif").addCmdText("rm",_("item_strangetrinket_rm")).addCmdText("mv",_("item_strangetrinket_mv")),$artisanshop.newItem("dragon","item_clockdragon.gif").addCmdText("rm",_("item_dragon_rm")).addCmdText("mv",_("item_dragon_mv"));var Artisan=$artisanshop.newPeople("artisan","item_artisan.gif");newRoom("farm","loc_farm.gif",{cp:function(e){if("EarOfCorn"===e.args[0]&&"AnotherEarOfCorn"===e.args[1])return"CornCopied"}}).addCommand("cp").addListener("CornCopied",function(){state.apply("CornCopied")}).newItem("earofcorn","item_corn.gif").addCmdText("rm",_("item_earofcorn_rm")),state.add("CornCopied",function(e){Farmer.addCmdText("less",_("corn_farmer_ok")),e&&$farm.addNewItem("another_earofcorn")});var Farmer=$farm.newPeople("farmer","item_farmer.gif");newRoom("clearing","loc_clearing.gif",{mkdir:function(e){return"House"==e.arg?"HouseMade":""}}).removeCommand("cd").addCmdText("cd",_("room_clearing_cd")).addCommand("mkdir").addListener("HouseMade",function(){state.apply("HouseMade")}),state.add("HouseMade",function(e){e&&$clearing.addChild(newRoom("house")),$clearing.getChildFromName(_("room_house")).addCmdText("cd",_("room_house_cd")).addCmdText("ls",_("room_house_ls")),$clearing.removeCmdText("cd"),$clearing.changeIntroText(_("room_clearing_text2")),CryingMan.addCmdText("less",_("room_clearing_less2"))});var CryingMan=$clearing.newPeople("cryingman","item_man.gif");newRoom("brokenbridge","loc_bridge.gif",{touch:function(e){"Plank"===e.arg&&this.ev.fire("touchPlank")}}).addCommand("touch").addListener("touchPlank",function(){state.apply("touchPlank")}),state.add("touchPlank",function(){$clearing.addCommand("cd"),$clearing.removeCmdText("cd"),$brokenbridge.removeCmdText("cd"),$brokenbridge.changeIntroText(_("room_brokenbridge_text2")),re?$brokenbridge.addNewItem("plank","item_plank.gif"):$brokenbridge.getItemFromName(_("item_plank")).changePic("item_plank.gif")}),newRoom("ominouspath","loc_path.gif",{rm:function(e){return"ThornyBrambles"==e.arg?"rmBrambles":""}}).addCommand("rm").addListener("rmBrambles",function(){state.apply("rmBrambles")}).newItem("brambles","item_brambles.gif").addCmdText("mv",_("item_brambles_mv")).addCmdText("rm",_("item_brambles_rm")).addValidCmd("rm"),state.add("rmBrambles",function(){link_rooms($ominouspath,CaveOfDisgruntledTrolls),re&&$ominouspath.removeItem("ThornyBrambles")}),newRoom("slide").removeCommand("cd").addCmdText("cd",_("room_slide_cd")),newRoom("kernel").addCommand("sudo").addCommand("grep").addCmdText("sudo",_("room_kernel_sudo")).addListener("sudoComplete",function(){state.apply("sudoComplete")}).addListener("tryEnterSudo",function(){$kernel.addCommand("IHTFP"),$kernel.addCmdText("IHTFP",_("room_kernel_IHTFP"))}),$kernel.newItem("certificate"),$kernel.newItem("instructions"),state.add("sudoComplete",function(e){$kernel.removeCommand("IHTFP"),$kernel.removeCmdText("IHTFP"),link_rooms($kernel,$paradise),enterRoom($paradise,vt)}),newRoom("morekernel").newItemBatch("bigfile",["L","M","Q","R","S","T","U","V","W"]),newRoom("paradise","loc_theend.gif").addCmdText("ls",_("room_paradise_ls"));var troll_evt=function(e){return"UglyTroll"==e.arg?"openSlide":""};newRoom("trollcave","loc_cave.gif",{mv:troll_evt,rm:troll_evt}).addCommand("rm").addCommand("mv").addCommand("cp").addListener("openSlide",function(){state.apply("openSlide")}),state.add("openSlide",function(e){$slide.addCommand("cd"),$slide.addCmdText("cd",_("room_slide_cd2")),e&&$trollcave.removeItem("UglyTroll")}),$trollcave.newPeople("troll1","item_troll1.gif").addValidCmd("rm").addCmdText("rm",_("people_troll11_rm")).addValidCmd("mv").addCmdText("mv",_("people_troll11_mv")).addValidCmd("cp").addCmdText("cp",_("people_troll11_cp")),$trollcave.newPeople("troll2","item_troll2.gif").addValidCmd("rm").addCmdText("rm",_("people_troll11_rm")),$trollcave.newPeople("supertroll","item_supertroll.gif").addCmdText("rm",_("people_supertroll_rm")).addCmdText("mv",_("people_supertroll_mv")),newRoom("cage","item_cage.gif").removeCommand("cd").addCmdText("cd",_("room_cage_cd")).newItem("kidnapped","item_cagedboy.gif").addCmdText("mv",_("people_kidnapped_mv"));var add_locker_func=function(){state.apply("addMagicLocker")};state.add("addMagicLocker",function(e){link_rooms($home,$magiclocker)}),newRoom("cluster","loc_cluster.gif",inside_evts={cd:function(e){return"AthenaClusterExited"}},outside_evts={cd:function(e){return"tryEnterAthenaCluster"}}).removeCommand("ls").addCmdText("ls",_("room_cluster_ls")).removeCommand("cd").addCmdText("cd",_("room_cluster_cd")).addListener("addMagicLocker",add_locker_func).addListener("AthenaClusterExited",function(){$cluster.removeCommand("cd")}).addCommand("tellme").addCommand("add").newItem("workstation","item_workstation.gif"),newRoom("mit","loc_MIT.gif").addListener("AthenaComboEntered",function(){state.apply("AthenaComboEntered")}).addCommand("tellme").addCommand("add").addListener("addMagicLocker",add_locker_func).addListener("tryEnterAthenaCluster",function(){$mit.addCommand("terminus").addCmdText("terminus",_("room_mit_terminus")),$cluster.removeCommand("ls").addCmdText("ls",_("room_cluster_ls"))}).newItem("mitletter","item_manuscript.gif"),state.add("AthenaComboEntered",function(e){$cluster.addCommand("ls"),$cluster.removeCmdText("ls"),$cluster.addCommand("cd"),e||enterRoom($cluster,vt),$mit.removeCommand("terminus"),$mit.removeCmdText("terminus"),$cluster.removeOutsideEvt("cd")}),newRoom("stata","loc_stata.gif").addCommand("tellme").addCommand("add").addListener("addMagicLocker",add_locker_func),$stata.newPeople("gradstudent","item_grad.gif"),$stata.newPeople("assistant","item_TA.gif"),newRoom("magiclocker","item_locker.gif").newItem("morecoming","item_comingsoon.gif"),link_rooms($home,$western_forest),link_rooms($western_forest,$spell_casting_academy),link_rooms($spell_casting_academy,$academy_practice),link_rooms($academy_practice,$box),link_rooms($home,$meadow),link_rooms($meadow,$mountain),link_rooms($spell_casting_academy,$lessons),link_rooms($mountain,$cave),link_rooms($cave,$dark_corridor),link_rooms($cave,$staircase),link_rooms($dark_corridor,$dank),link_rooms($dank,$small_hole),link_rooms($tunnel,$stone_chamber),link_rooms($stone_chamber,$portal),link_rooms($portal,$townsquare),link_rooms($townsquare,$market),link_rooms($townsquare,$library),link_rooms($townsquare,$rockypath),link_rooms($townsquare,$artisanshop),link_rooms($townsquare,$brokenbridge),link_rooms($brokenbridge,$clearing),link_rooms($clearing,$ominouspath),link_rooms($trollcave,$cage),link_rooms($slide,$kernel),link_rooms($trollcave,$slide),link_rooms($kernel,$morekernel),link_rooms($home,$mit),link_rooms($mit,$stata),link_rooms($mit,$cluster),console.log("Game objects : init"),start_game();</script><!-- endinject --></body></html>